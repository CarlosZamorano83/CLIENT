<!DOCTYPE html>
<html>
<head>
	<title>Login Usuario</title>
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"> </script>

	

</head>
<body>


<h1>Login</h1>

<br>
<h2>
    <label for="mail">E-mail:</label>
    <input type="email" id="mail" />
</h2>

<br>
<h3>
    <label for="password">Password</label>
    <input type="password" id="password"></input>
</h3>


<button onclick="peticion();">Login </button>


</body>

	<script >


        function peticion(){
            
            var email = document.getElementById('mail').value;
            var password = document.getElementById('password').value;

            $.ajax({

                // la URL para la petición
                url : "http://localhost:8888/prueba261118/public/index.php/api/login",
             
                // la información a enviar
             

                data : {password: password, email: email},
             
                // especifica si será una petición POST o GET

                type : 'POST',
             
                // el tipo de información que se espera de respuesta
                
                dataType : 'json',
             
                // código a ejecutar si la petición es satisfactoria;
                // la respuesta es pasada como argumento a la función



                success : function(json) {
                    
                    console.log("Se ha creado el usario");
                    console.log(json);

                },

                error : function(xhr, status){

                    console.log("No se ha creado el usario"); // mensaje que salta en el navegador
                },

                complete : function(xhr, status){
                    console.log("Peticion realizada");
                }

            })


                .done(function(msg)
                
                 {
            window.open("http://localhost:8888/prueba261118/FRONTEND/category.html");
            alert("Pasa correctamente a la pantalla de categorias");
       
             })
            .fail(function(msg){
            alert("No Existe EL usuario" + msg);
            });

        }


    // https://librosweb.es/libro/fundamentos_jquery/capitulo_7/metodos_ajax_de_jquery.html

    </script>   


</html>

